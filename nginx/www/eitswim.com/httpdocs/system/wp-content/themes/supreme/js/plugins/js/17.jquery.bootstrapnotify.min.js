!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(b){function c(f){var e=!1;return b('[data-notify="container"]').each(function(j,q){var h=b(q),m=h.find('[data-notify="title"]').html().trim(),i=h.find('[data-notify="message"]').html().trim(),g=m===b("<div>"+f.settings.content.title+"</div>").html().trim(),k=i===b("<div>"+f.settings.content.message+"</div>").html().trim(),p=h.hasClass("alert-"+f.settings.type);return g&&k&&p&&(e=!0),!e}),e}function a(f,h,e){var g={content:{message:"object"==typeof h?h.message:h,title:h.title?h.title:"",icon:h.icon?h.icon:"",url:h.url?h.url:"#",target:h.target?h.target:"-"}};e=b.extend(!0,{},g,e),this.settings=b.extend(!0,{},d,e),this._defaults=d,"-"===this.settings.content.target&&(this.settings.content.target=this.settings.url_target),this.animations={start:"webkitAnimationStart oanimationstart MSAnimationStart animationstart",end:"webkitAnimationEnd oanimationend MSAnimationEnd animationend"},"number"==typeof this.settings.offset&&(this.settings.offset={x:this.settings.offset,y:this.settings.offset}),(this.settings.allow_duplicates||!this.settings.allow_duplicates&&!c(this))&&this.init()}var d={element:"body",position:null,type:"info",allow_dismiss:!0,allow_duplicates:!0,newest_on_top:!1,showProgressbar:!1,placement:{from:"top",align:"right"},offset:20,spacing:10,z_index:1031,delay:5000,timer:1000,url_target:"_blank",mouse_over:null,animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"},onShow:null,onShown:null,onClose:null,onClosed:null,onClick:null,icon_type:"class",template:'<div data-notify="container" class="col-xs-11 col-sm-4 alert alert-{0}" role="alert"><button type="button" aria-hidden="true" class="close" data-notify="dismiss">&times;</button><span data-notify="icon"></span> <span data-notify="title">{1}</span> <span data-notify="message">{2}</span><div class="progress" data-notify="progressbar"><div class="progress-bar progress-bar-{0}" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div></div><a href="{3}" target="{4}" data-notify="url"></a></div>'};String.format=function(){var e=arguments,f=arguments[0];return f.replace(/(\{\{\d\}\}|\{\d\})/g,function(h){if("{{"===h.substring(0,2)){return h}var g=parseInt(h.match(/\d/)[0]);return e[g+1]})},b.extend(a.prototype,{init:function(){var e=this;this.buildNotify(),this.settings.content.icon&&this.setIcon(),"#"!=this.settings.content.url&&this.styleURL(),this.styleDismiss(),this.placement(),this.bind(),this.notify={$ele:this.$ele,update:function(h,g){var k={};"string"==typeof h?k[h]=g:k=h;for(var m in k){switch(m){case"type":this.$ele.removeClass("alert-"+e.settings.type),this.$ele.find('[data-notify="progressbar"] > .progress-bar').removeClass("progress-bar-"+e.settings.type),e.settings.type=k[m],this.$ele.addClass("alert-"+k[m]).find('[data-notify="progressbar"] > .progress-bar').addClass("progress-bar-"+k[m]);break;case"icon":var f=this.$ele.find('[data-notify="icon"]');"class"===e.settings.icon_type.toLowerCase()?f.removeClass(e.settings.content.icon).addClass(k[m]):(f.is("img")||f.find("img"),f.attr("src",k[m])),e.settings.content.icon=k[h];break;case"progress":var l=e.settings.delay-e.settings.delay*(k[m]/100);this.$ele.data("notify-delay",l),this.$ele.find('[data-notify="progressbar"] > div').attr("aria-valuenow",k[m]).css("width",k[m]+"%");break;case"url":this.$ele.find('[data-notify="url"]').attr("href",k[m]);break;case"target":this.$ele.find('[data-notify="url"]').attr("target",k[m]);break;default:this.$ele.find('[data-notify="'+m+'"]').html(k[m])}}var j=this.$ele.outerHeight()+parseInt(e.settings.spacing)+parseInt(e.settings.offset.y);e.reposition(j)},close:function(){e.close()}}},buildNotify:function(){var e=this.settings.content;this.$ele=b(String.format(this.settings.template,this.settings.type,e.title,e.message,e.url,e.target)),this.$ele.attr("data-notify-position",this.settings.placement.from+"-"+this.settings.placement.align),this.settings.allow_dismiss||this.$ele.find('[data-notify="dismiss"]').css("display","none"),(this.settings.delay<=0&&!this.settings.showProgressbar||!this.settings.showProgressbar)&&this.$ele.find('[data-notify="progressbar"]').remove()},setIcon:function(){"class"===this.settings.icon_type.toLowerCase()?this.$ele.find('[data-notify="icon"]').addClass(this.settings.content.icon):this.$ele.find('[data-notify="icon"]').is("img")?this.$ele.find('[data-notify="icon"]').attr("src",this.settings.content.icon):this.$ele.find('[data-notify="icon"]').append('<img src="'+this.settings.content.icon+'" alt="Notify Icon" />')},styleDismiss:function(){this.$ele.find('[data-notify="dismiss"]').css({position:"absolute",right:"10px",top:"5px",zIndex:this.settings.z_index+2})},styleURL:function(){this.$ele.find('[data-notify="url"]').css({backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)",height:"100%",left:0,position:"absolute",top:0,width:"100%",zIndex:this.settings.z_index+1})},placement:function(){var h=this,g=this.settings.offset.y,j={display:"inline-block",margin:"0px auto",position:this.settings.position?this.settings.position:"body"===this.settings.element?"fixed":"absolute",transition:"all .5s ease-in-out",zIndex:this.settings.z_index},k=!1,f=this.settings;switch(b('[data-notify-position="'+this.settings.placement.from+"-"+this.settings.placement.align+'"]:not([data-closing="true"])').each(function(){g=Math.max(g,parseInt(b(this).css(f.placement.from))+parseInt(b(this).outerHeight())+parseInt(f.spacing))}),this.settings.newest_on_top===!0&&(g=this.settings.offset.y),j[this.settings.placement.from]=g+"px",this.settings.placement.align){case"left":case"right":j[this.settings.placement.align]=this.settings.offset.x+"px";break;case"center":j.left=0,j.right=0}this.$ele.css(j).addClass(this.settings.animate.enter),b.each(Array("webkit-","moz-","o-","ms-",""),function(l,e){h.$ele[0].style[e+"AnimationIterationCount"]=1}),b(this.settings.element).append(this.$ele),this.settings.newest_on_top===!0&&(g=parseInt(g)+parseInt(this.settings.spacing)+this.$ele.outerHeight(),this.reposition(g)),b.isFunction(h.settings.onShow)&&h.settings.onShow.call(this.$ele),this.$ele.one(this.animations.start,function(){k=!0}).one(this.animations.end,function(){h.$ele.removeClass(h.settings.animate.enter),b.isFunction(h.settings.onShown)&&h.settings.onShown.call(this)}),setTimeout(function(){k||b.isFunction(h.settings.onShown)&&h.settings.onShown.call(this)},600)},bind:function(){var f=this;if(this.$ele.find('[data-notify="dismiss"]').on("click",function(){f.close()}),b.isFunction(f.settings.onClick)&&this.$ele.on("click",function(g){g.target!=f.$ele.find('[data-notify="dismiss"]')[0]&&f.settings.onClick.call(this,g)}),this.$ele.mouseover(function(){b(this).data("data-hover","true")}).mouseout(function(){b(this).data("data-hover","false")}),this.$ele.data("data-hover","false"),this.settings.delay>0){f.$ele.data("notify-delay",f.settings.delay);var e=setInterval(function(){var g=parseInt(f.$ele.data("notify-delay"))-f.settings.timer;if("false"===f.$ele.data("data-hover")&&"pause"===f.settings.mouse_over||"pause"!=f.settings.mouse_over){var h=(f.settings.delay-g)/f.settings.delay*100;f.$ele.data("notify-delay",g),f.$ele.find('[data-notify="progressbar"] > div').attr("aria-valuenow",h).css("width",h+"%")}g<=-f.settings.timer&&(clearInterval(e),f.close())},f.settings.timer)}},close:function(){var g=this,f=parseInt(this.$ele.css(this.settings.placement.from)),h=!1;this.$ele.attr("data-closing","true").addClass(this.settings.animate.exit),g.reposition(f),b.isFunction(g.settings.onClose)&&g.settings.onClose.call(this.$ele),this.$ele.one(this.animations.start,function(){h=!0}).one(this.animations.end,function(){b(this).remove(),b.isFunction(g.settings.onClosed)&&g.settings.onClosed.call(this)}),setTimeout(function(){h||(g.$ele.remove(),g.settings.onClosed&&g.settings.onClosed(g.$ele))},600)},reposition:function(g){var f=this,h='[data-notify-position="'+this.settings.placement.from+"-"+this.settings.placement.align+'"]:not([data-closing="true"])',j=this.$ele.nextAll(h);this.settings.newest_on_top===!0&&(j=this.$ele.prevAll(h)),j.each(function(){b(this).css(f.settings.placement.from,g),g=parseInt(g)+parseInt(f.settings.spacing)+b(this).outerHeight()})}}),b.notify=function(f,g){var h=new a(this,f,g);return h.notify},b.notifyDefaults=function(e){return d=b.extend(!0,{},d,e)},b.notifyClose=function(e){"undefined"==typeof e||"all"===e?b("[data-notify]").find('[data-notify="dismiss"]').trigger("click"):"success"===e||"info"===e||"warning"===e||"danger"===e?b(".alert-"+e+"[data-notify]").find('[data-notify="dismiss"]').trigger("click"):e?b(e+"[data-notify]").find('[data-notify="dismiss"]').trigger("click"):b('[data-notify-position="'+e+'"]').find('[data-notify="dismiss"]').trigger("click")},b.notifyCloseExcept=function(e){"success"===e||"info"===e||"warning"===e||"danger"===e?b("[data-notify]").not(".alert-"+e).find('[data-notify="dismiss"]').trigger("click"):b("[data-notify]").not(e).find('[data-notify="dismiss"]').trigger("click")}});