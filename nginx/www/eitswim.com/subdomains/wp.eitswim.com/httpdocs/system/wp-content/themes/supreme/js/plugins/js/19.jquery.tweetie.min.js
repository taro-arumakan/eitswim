!function(a){a.fn.twittie=function(){var e=arguments[0] instanceof Object?arguments[0]:{},b="function"==typeof arguments[0]?arguments[0]:arguments[1],g=a.extend({username:null,list:null,hashtag:null,count:10,hideReplies:!1,dateFormat:"%b/%d/%Y",template:"{{date}} - {{tweet}}",apiPath:"api/tweet.php",loadingText:"Loading..."},e);g.list&&!g.username&&a.error("If you want to fetch tweets from a list, you must define the username of the list owner.");var h=function(j){var i=j.replace(/(https?:\/\/([-\w\.]+)+(:\d+)?(\/([\w\/_\.]*(\?\S+)?)?)?)/gi,'<a href="$1" target="_blank" title="Visit this link">$1</a>').replace(/#([a-zA-Z0-9_]+)/g,'<a href="https://twitter.com/search?q=%23$1&amp;src=hash" target="_blank" title="Search for #$1">#$1</a>').replace(/@([a-zA-Z0-9_]+)/g,'<a href="https://twitter.com/$1" target="_blank" title="$1 on Twitter">@$1</a>');return i},f=function(r){var p=r.split(" ");r=new Date(Date.parse(p[1]+" "+p[2]+", "+p[5]+" "+p[3]+" UTC"));for(var k=["January","February","March","April","May","June","July","August","September","October","November","December"],v={"%d":r.getDate(),"%m":r.getMonth()+1,"%b":k[r.getMonth()].substr(0,3),"%B":k[r.getMonth()],"%y":String(r.getFullYear()).slice(-2),"%Y":r.getFullYear()},q=g.dateFormat,m=g.dateFormat.match(/%[dmbByY]/g),o=0,j=m.length;j>o;o++){q=q.replace(m[o],v[m[o]])}return q},c=function(l){for(var j=g.template,i=["date","tweet","avatar","url","retweeted","screen_name","user_name"],m=0,k=i.length;k>m;m++){j=j.replace(new RegExp("{{"+i[m]+"}}","gi"),l[i[m]])}return j};this.html("<span>"+g.loadingText+"</span>");var d=this;a.getJSON(g.apiPath,{username:g.username,list:g.list,hashtag:g.hashtag,count:g.count,exclude_replies:g.hideReplies},function(i){d.find("span").fadeOut("fast",function(){d.html("<ul></ul>");for(var k=0;k<g.count;k++){var j=!1;if(i[k]){j=i[k]}else{if(void 0===i.statuses||!i.statuses[k]){break}j=i.statuses[k]}var m={user_name:j.user.name,date:f(j.created_at),tweet:h(j.retweeted?"RT @"+j.user.screen_name+": "+j.retweeted_status.text:j.text),avatar:'<img src="'+j.user.profile_image_url+'" />',url:"https://twitter.com/"+j.user.screen_name+"/status/"+j.id_str,retweeted:j.retweeted,screen_name:h("@"+j.user.screen_name)};d.find("ul").append("<li>"+c(m)+"</li>")}"function"==typeof b&&b()})})}}(jQuery);